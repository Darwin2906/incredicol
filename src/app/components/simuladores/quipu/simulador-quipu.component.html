<div class="simulador-quipu-container">
  <div class="container py-4">
    <div class="header text-center mb-4">
      <div class="d-flex align-items-center justify-content-center mb-3">
        <div class="quipu-icon me-3">
          <span class="quipu-q">Q</span>
        </div>
        <h1 class="text-success fw-bold mb-0">Simulador Quipu</h1>
      </div>
      <p class="text-muted">Encuentra el préstamo perfecto para tus necesidades</p>
    </div>

    <div class="row g-4">
      <!-- Sección del formulario -->
      <div class="col-lg-6">
        <div class="form-section p-4 rounded shadow-sm h-100">
          <h2 class="text-success mb-4 fw-semibold">
            <i class="bi bi-currency-exchange me-2"></i>¿Cuánta plata necesitas?
          </h2>
          
          <div class="slider-container mb-4">
            <span class="loan-amount display-6 fw-bold text-success">{{ formatCurrency(loanAmount()) }}</span>
            
            <div class="range-container position-relative mt-4 mb-3">
              <div class="value-indicator bg-success text-white px-2 py-1 rounded position-absolute">
                {{ formatCurrency(loanAmount()) }}
              </div>
              <input type="range" 
                     [min]="MIN_AMOUNT"
                     [max]="MAX_AMOUNT"
                     [step]="STEP_AMOUNT"
                     [value]="loanAmount()"
                     (input)="updateLoanAmount($any($event.target).value)"
                     class="slider form-range custom-range">
              <div class="slider-track"></div>
            </div>
            
            <div class="slider-labels d-flex justify-content-between mt-2">
              <small class="text-muted">Mínimo: {{ formatCurrency(MIN_AMOUNT) }}</small>
              <small class="text-muted">Múltiplos de {{ formatCurrency(STEP_AMOUNT) }}</small>
              <small class="text-muted">Máximo: {{ formatCurrency(MAX_AMOUNT) }}</small>
            </div>
          </div>

          <!-- Plazo automático (no seleccionable) -->
          <div class="term-display mb-4 p-3 bg-light rounded">
            <h3 class="h5 text-success mb-2">
              <i class="bi bi-calendar-check me-2"></i>Plazo de pago
            </h3>
            <p class="fs-4 fw-bold text-dark mb-0">{{ loanTerm() }} cuotas mensuales</p>
          </div>

          <div class="monthly-payment p-4 bg-success text-white rounded text-center mb-4">
            <h3 class="h5 mb-3">Cuota mensual estimada</h3>
            <div class="payment-value display-5 fw-bold">{{ formatCurrency(cuotaMensual()) }}</div>
            <small class="opacity-75">Valor aproximado de cada cuota</small>
          </div>

          <div class="disclaimer p-3 bg-light rounded">
            <p class="small text-muted mb-0">
              <i class="bi bi-info-circle me-1"></i> La presente simulación tiene fines informativos y no significa oferta o promesa de contrato. Las condiciones finales podrían variar al momento de la aprobación.
            </p>
          </div>
        </div>
      </div>

      <!-- Sección de detalles -->
      <div class="col-lg-6">
        <div class="details-section p-4 rounded shadow-sm h-100">
          <h2 class="text-success mb-4 fw-semibold">
            <i class="bi bi-receipt me-2"></i>Detalles del crédito
          </h2>
          
          <div class="detail-item d-flex justify-content-between align-items-center py-3 border-bottom">
            <span class="text-muted">Monto solicitado</span>
            <strong class="text-success fs-5">{{ formatCurrency(loanAmount()) }}</strong>
          </div>
          
          <div class="detail-item d-flex justify-content-between align-items-center py-3 border-bottom">
            <span class="text-muted">Interés (3.94% M.V.)</span>
            <strong class="text-success">{{ formatCurrency(pagoInteres()) }}</strong>
          </div>
          
          <div class="detail-item d-flex justify-content-between align-items-center py-3 border-bottom">
            <span class="text-muted">Fianza (IVA incluido)</span>
            <strong class="text-success">{{ formatCurrency(fianza()) }}</strong>
          </div>
          
          <div class="detail-item d-flex justify-content-between align-items-center py-3 border-bottom">
            <span class="text-muted">Firma digital (IVA incluido)</span>
            <strong class="text-success">{{ formatCurrency(FIRMA_DIGITAL) }}</strong>
          </div>
          
          <div class="detail-item d-flex justify-content-between align-items-center py-3 border-top border-2 border-success mt-3 pt-3">
            <span class="fw-bold fs-5 text-dark">Total a pagar</span>
            <strong class="text-success fs-4">{{ formatCurrency(totalPagar()) }}</strong>
          </div>

          <button class="request-button btn btn-success btn-lg w-100 mt-4 py-3 fw-bold" (click)="requestLoan()">
            <i class="bi bi-check-circle me-2"></i> Solicitar crédito
          </button>
          
          <div class="mt-3 text-center">
            <small class="text-muted">
              <i class="bi bi-shield-check me-1"></i> Tu información está protegida
            </small>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>